(()=>{function u(e){return document.querySelectorAll(e)}function h(e,n=null){let t=e.parentElement;return e.parentNode?[...n?t.querySelectorAll(n):t.children].filter(l=>l!==e&&Object.values(t.children).includes(l)):[]}function o(e,n,t=null){let l=`data-${n}`;if(t!==null)return e.setAttribute(l,t);let r=e.getAttribute(l);return r==="true"&&(r=!0),r==="false"&&(r=!1),r}function y(e,n=null){return e.parentElement?[A(e.parentElement),e].flat().filter(t=>t&&t!==e):[]}function A(e,n=null){return e.parentElement?[A(e.parentElement),e].flat():null}function $(e,n){let t=O(n),l=[...u(e)],r=[];l.forEach(a=>{let d=p(a);r=[...r,...p(a)],o(a,"is-open")===!0?o(a,"is-open",!0):o(a,"is-open",!1),k(a,d,t?.onInit),a.addEventListener("click",i=>{let s=i.currentTarget,E=p(s);t.closeOnAnotherTogglerClicked&&!o(s,"is-open")&&l.filter(c=>c!==s&&o(c,"is-open")).forEach(c=>f(c,r,t?.onClose)),o(s,"is-open")?f(s,E,t?.onClose):m(s,E,t?.onOpen)})}),t.closeOnClickOut===!0&&document.addEventListener("click",a=>{let d=[...l,...r];[...y(a.target),a.target].filter(i=>d.includes(i)).length===0&&l.filter(i=>o(i,"is-open")).forEach(i=>f(i,r,t?.onClose))})}function O(e){return{closeOnClickOut:!0,closeOnAnotherTogglerClicked:!0,...e}}function p(e){return o(e,"target")?u(o(e,"target")):h(e,"[toggler-target]")}function k(e,n,t){t?t(n,e):o(e,"is-open")?n.forEach(l=>l.style.display="block"):n.forEach(l=>l.style.display="none")}function m(e,n,t){n.length!==0&&(o(e,"is-open",!0),t?t(n,e):n.forEach(l=>l.style.display="block"))}function f(e,n,t){n.length!==0&&(console.log("before "+o(e,"is-open")),o(e,"is-open",!1),console.log(e),t?t(n,e):n.forEach(l=>l.style.display="none"))}window.dropy=$;})();
